"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[490],{490:(e,l,s)=>{s.r(l),s.d(l,{default:()=>x});var t=s(555),n=s(43),a=s(169),r=s(729),d=s(114),o=s(767),c=s(722),i=s(579);const x=()=>{const{items:e,getSubtotal:l,getShippingFee:s,getCartTotal:x,updateCartItem:u,removeFromCart:m,clearCart:h,isGuest:g}=(0,a._$)(),{isAuthenticated:p,user:b}=(0,r.As)(),{showCartNotification:f,showOrderSuccess:y,showError:j}=(0,d.h)(),N=(0,o.Zp)(),[v,k]=(0,n.useState)(!1),[w,C]=(0,n.useState)(""),[_,T]=(0,n.useState)(!1),[S,H]=(0,n.useState)({full_name:"",email:"",phone:"",address:"",note:"",payment_method:"cod"}),G=async(e,l)=>{if(l<=0){await m(e)}else{await u(e,l)}},V=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),q=e=>{const{name:l,value:s}=e.target;H((e=>(0,t.A)((0,t.A)({},e),{},{[l]:s})))};return 0===e.length?(0,i.jsx)("div",{className:"min-h-screen pt-16 md:pt-20 bg-deep-black mobile-nav-padding",children:(0,i.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"font-luxury text-xl sm:text-2xl font-bold text-luxury-gold mb-4",children:"Gi\u1ecf H\xe0ng"}),(0,i.jsxs)("div",{className:"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-6",children:[(0,i.jsx)("span",{className:"text-4xl mb-3 block",children:"\ud83d\uded2"}),(0,i.jsx)("h2",{className:"text-lg font-bold text-luxury-gold mb-3",children:"Gi\u1ecf h\xe0ng c\u1ee7a b\u1ea1n \u0111ang tr\u1ed1ng"}),(0,i.jsx)("p",{className:"text-soft-gold mb-4 text-sm",children:"H\xe3y kh\xe1m ph\xe1 c\xe1c s\u1ea3n ph\u1ea9m tr\u1ea7m h\u01b0\u01a1ng cao c\u1ea5p c\u1ee7a ch\xfang t\xf4i"}),(0,i.jsx)("a",{href:"/products",className:"inline-block bg-gradient-to-r from-luxury-gold to-luxury-copper text-deep-black px-4 py-2 rounded-lg font-bold hover:shadow-lg hover:shadow-luxury-gold/30 transition-all duration-300 transform hover:scale-[1.02] text-sm",children:"Mua S\u1eafm Ngay"})]})]})})}):(0,i.jsx)("div",{className:"min-h-screen pt-16 md:pt-20 bg-deep-black mobile-nav-padding",children:(0,i.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[(0,i.jsxs)("div",{className:"text-center mb-4 sm:mb-6",children:[(0,i.jsxs)("h1",{className:"font-luxury text-xl sm:text-2xl font-bold text-luxury-gold mb-2",children:["Gi\u1ecf H\xe0ng (",e.length," s\u1ea3n ph\u1ea9m)"]}),g&&!p&&(0,i.jsx)("p",{className:"text-soft-gold text-xs",children:"\ud83d\udca1 B\u1ea1n \u0111ang mua s\u1eafm d\u01b0\u1edbi d\u1ea1ng kh\xe1ch. \u0110\u0103ng nh\u1eadp \u0111\u1ec3 l\u01b0u th\xf4ng tin v\xe0 \u0111\u1eb7t h\xe0ng d\u1ec5 d\xe0ng h\u01a1n."})]}),w&&(0,i.jsx)("div",{className:"mb-4 p-3 rounded-lg text-center text-sm ".concat(w.includes("th\xe0nh c\xf4ng")?"bg-green-900/30 border border-green-500/30 text-green-300":"bg-red-900/30 border border-red-500/30 text-red-300"),children:w}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[(0,i.jsx)("div",{className:"lg:col-span-2 space-y-3",children:e.map((e=>(0,i.jsx)("div",{className:"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-3 sm:p-4",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("img",{src:e.image||"/placeholder-image.jpg",alt:e.name,className:"w-full sm:w-16 h-16 object-cover rounded-lg"})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"font-bold text-luxury-gold text-base mb-1",children:e.name}),(0,i.jsxs)("p",{className:"text-soft-gold text-xs mb-2",children:[V(e.price)," / s\u1ea3n ph\u1ea9m"]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("button",{onClick:()=>G(e.id,e.quantity-1),className:"w-7 h-7 rounded-full bg-luxury-gold/20 border border-luxury-gold/30 text-luxury-gold hover:bg-luxury-gold/30 transition-colors flex items-center justify-center text-sm",children:"-"}),(0,i.jsx)("span",{className:"text-white font-medium min-w-[1.5rem] text-center text-sm",children:e.quantity}),(0,i.jsx)("button",{onClick:()=>G(e.id,e.quantity+1),className:"w-7 h-7 rounded-full bg-luxury-gold/20 border border-luxury-gold/30 text-luxury-gold hover:bg-luxury-gold/30 transition-colors flex items-center justify-center text-sm",children:"+"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("span",{className:"text-luxury-gold font-bold text-sm",children:V(e.price*e.quantity)}),(0,i.jsx)("button",{onClick:()=>(async e=>{await m(e)})(e.id),className:"text-red-400 hover:text-red-300 text-xs underline",children:"X\xf3a"})]})]})]})]})},e.id)))}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-3 sm:p-4 sticky top-20",children:[(0,i.jsx)("h2",{className:"font-luxury text-lg font-bold text-luxury-gold mb-3",children:"T\xf3m T\u1eaft \u0110\u01a1n H\xe0ng"}),(0,i.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,i.jsxs)("div",{className:"flex justify-between text-soft-gold text-sm",children:[(0,i.jsx)("span",{children:"T\u1ea1m t\xednh:"}),(0,i.jsx)("span",{children:V(l())})]}),(0,i.jsxs)("div",{className:"flex justify-between text-soft-gold text-sm",children:[(0,i.jsx)("span",{children:"Ph\xed v\u1eadn chuy\u1ec3n:"}),(0,i.jsx)("span",{children:V(s())})]}),(0,i.jsx)("div",{className:"border-t border-luxury-gold/20 pt-2",children:(0,i.jsxs)("div",{className:"flex justify-between text-luxury-gold font-bold text-base",children:[(0,i.jsx)("span",{children:"T\u1ed5ng c\u1ed9ng:"}),(0,i.jsx)("span",{children:V(x())})]})})]}),!_&&(0,i.jsx)("button",{onClick:()=>T(!0),className:"w-full bg-gradient-to-r from-luxury-gold to-luxury-copper text-deep-black px-4 py-2 rounded-lg font-bold hover:shadow-lg hover:shadow-luxury-gold/30 transition-all duration-300 transform hover:scale-[1.02] text-sm",children:"Ti\u1ebfn H\xe0nh Thanh To\xe1n"})]}),_&&(0,i.jsxs)("div",{className:"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-3 sm:p-4",children:[(0,i.jsx)("h3",{className:"font-luxury text-base font-bold text-luxury-gold mb-3",children:"Th\xf4ng Tin \u0110\u1eb7t H\xe0ng"}),p&&b?(0,i.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,i.jsxs)("p",{className:"text-soft-gold text-sm",children:[(0,i.jsx)("strong",{children:"Kh\xe1ch h\xe0ng:"})," ",b.full_name]}),(0,i.jsxs)("p",{className:"text-soft-gold text-sm",children:[(0,i.jsx)("strong",{children:"Email:"})," ",b.email]}),(0,i.jsxs)("p",{className:"text-soft-gold text-sm",children:[(0,i.jsx)("strong",{children:"S\u0110T:"})," ",b.phone]}),b.address&&(0,i.jsxs)("p",{className:"text-soft-gold text-sm",children:[(0,i.jsx)("strong",{children:"\u0110\u1ecba ch\u1ec9:"})," ",b.address]})]}):(0,i.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-luxury-gold font-medium mb-1 text-xs",children:"H\u1ecd v\xe0 T\xean *"}),(0,i.jsx)("input",{type:"text",name:"full_name",value:S.full_name,onChange:q,className:"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs",placeholder:"Nh\u1eadp h\u1ecd v\xe0 t\xean"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-luxury-gold font-medium mb-1 text-xs",children:"Email *"}),(0,i.jsx)("input",{type:"email",name:"email",value:S.email,onChange:q,className:"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs",placeholder:"email@example.com"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-luxury-gold font-medium mb-1 text-xs",children:"S\u1ed1 \u0110i\u1ec7n Tho\u1ea1i *"}),(0,i.jsx)("input",{type:"tel",name:"phone",value:S.phone,onChange:q,className:"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs",placeholder:"0123 456 789"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-luxury-gold font-medium mb-1 text-xs",children:"\u0110\u1ecba Ch\u1ec9 Giao H\xe0ng *"}),(0,i.jsx)("textarea",{name:"address",value:S.address,onChange:q,rows:"2",className:"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs resize-none",placeholder:"Nh\u1eadp \u0111\u1ecba ch\u1ec9 giao h\xe0ng \u0111\u1ea7y \u0111\u1ee7"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-luxury-gold font-medium mb-1 text-xs",children:"Ghi Ch\xfa (T\xf9y ch\u1ecdn)"}),(0,i.jsx)("textarea",{name:"note",value:S.note,onChange:q,rows:"2",className:"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs resize-none",placeholder:"Ghi ch\xfa \u0111\u1eb7c bi\u1ec7t cho \u0111\u01a1n h\xe0ng"})]})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-luxury-gold font-medium mb-2 text-xs",children:"Ph\u01b0\u01a1ng Th\u1ee9c Thanh To\xe1n"}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,i.jsx)("input",{type:"radio",name:"payment_method",value:"cod",checked:"cod"===S.payment_method,onChange:q,className:"text-luxury-gold focus:ring-luxury-gold"}),(0,i.jsx)("span",{className:"text-soft-gold text-xs",children:"\ud83d\udcb5 Thanh to\xe1n khi nh\u1eadn h\xe0ng (COD)"})]}),(0,i.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,i.jsx)("input",{type:"radio",name:"payment_method",value:"bank_transfer",checked:"bank_transfer"===S.payment_method,onChange:q,className:"text-luxury-gold focus:ring-luxury-gold"}),(0,i.jsx)("span",{className:"text-soft-gold text-xs",children:"\ud83c\udfe6 Chuy\u1ec3n kho\u1ea3n ng\xe2n h\xe0ng"})]})]})]}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("button",{onClick:()=>T(!1),className:"flex-1 bg-charcoal border border-luxury-gold/30 text-soft-gold px-3 py-2 rounded-lg font-medium hover:bg-luxury-gold/10 transition-colors text-xs",children:"Quay L\u1ea1i"}),(0,i.jsx)("button",{onClick:async()=>{if(0!==e.length){if(g&&!p){const e=(()=>{const{full_name:e,email:l,phone:s,address:t}=S;return e.trim()?l.trim()?/\S+@\S+\.\S+/.test(l)?s.trim()?/^[0-9]{10,11}$/.test(s.replace(/[^0-9]/g,""))?t.trim()?null:"Vui l\xf2ng nh\u1eadp \u0111\u1ecba ch\u1ec9":"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7":"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i":"Email kh\xf4ng h\u1ee3p l\u1ec7":"Vui l\xf2ng nh\u1eadp email":"Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean"})();if(e)return void C(e)}k(!0),C("");try{const l={items:e.map((e=>{var l;return{product_id:e.id,quantity:e.quantity,price:e.price,name:e.name,image_url:e.image_url||(null===(l=e.images)||void 0===l?void 0:l[0])||""}})),payment_method:S.payment_method,customer_info:g&&!p?{full_name:S.full_name,email:S.email,phone:S.phone}:{},shipping_address:g&&!p?{address:S.address}:{},notes:g&&!p&&S.note||""},s=await c.A.post("".concat("https://dbe62f8b-cea5-4002-8cff-0cd7ed98eb8a.preview.emergentagent.com","/api/orders"),l);y({orderId:s.data.id}),await h(),g&&!p&&H({full_name:"",email:"",phone:"",address:"",note:"",payment_method:"cod"}),T(!1),N("/order-success",{state:{orderData:s.data}})}catch(t){var l,s;const e=(null===(l=t.response)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.detail)||"C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u1eb7t h\xe0ng. Vui l\xf2ng th\u1eed l\u1ea1i.";C(e),j(e)}finally{k(!1)}}else C("Gi\u1ecf h\xe0ng c\u1ee7a b\u1ea1n \u0111ang tr\u1ed1ng")},disabled:v,className:"flex-1 bg-gradient-to-r from-luxury-gold to-luxury-copper text-deep-black px-3 py-2 rounded-lg font-bold hover:shadow-lg hover:shadow-luxury-gold/30 transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-xs",children:v?"\u0110ang X\u1eed L\xfd...":"\u0110\u1eb7t H\xe0ng"})]})]})]})]})]})})}}}]);
//# sourceMappingURL=490.7f0402ca.chunk.js.map