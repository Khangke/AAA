"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[202],{914:(e,s,l)=>{l.d(s,{A:()=>i});var a=l(555),t=l(986),r=l(43),d=l(579);const n=["src","alt","className","placeholder"],i=e=>{let{src:s,alt:l,className:i,placeholder:c="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmNWY1ZjUiLz48L3N2Zz4="}=e,o=(0,t.A)(e,n);const[x,m]=(0,r.useState)(!1),[u,g]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),y=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=new IntersectionObserver((s=>{let[l]=s;l.isIntersecting&&(g(!0),e.disconnect())}),{threshold:.1});return y.current&&e.observe(y.current),()=>e.disconnect()}),[]);return(0,d.jsxs)("div",(0,a.A)((0,a.A)({ref:y,className:"relative overflow-hidden ".concat(i)},o),{},{children:[!x&&(0,d.jsx)("div",{className:"absolute inset-0 bg-gray-800 animate-pulse"}),u&&!h&&(0,d.jsx)("img",{src:s,alt:l,className:"w-full h-full object-cover transition-opacity duration-300 ".concat(x?"opacity-100":"opacity-0"),onLoad:()=>{m(!0)},onError:()=>{p(!0)},loading:"lazy"}),h&&(0,d.jsx)("div",{className:"absolute inset-0 bg-gray-800 flex items-center justify-center",children:(0,d.jsx)("div",{className:"text-gray-400 text-sm",children:"Kh\xf4ng th\u1ec3 t\u1ea3i h\xecnh \u1ea3nh"})})]}))}},302:(e,s,l)=>{l.d(s,{Vp:()=>r,uL:()=>d});l(43);var a=l(579);const t=()=>(0,a.jsxs)("div",{className:"bg-deep-black/60 rounded-lg overflow-hidden backdrop-blur-sm border border-luxury-gold/20 animate-pulse",children:[(0,a.jsx)("div",{className:"aspect-square bg-gray-800"}),(0,a.jsxs)("div",{className:"p-2 sm:p-3 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-800 rounded w-3/4"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"h-3 bg-gray-800 rounded w-full"}),(0,a.jsx)("div",{className:"h-3 bg-gray-800 rounded w-2/3"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-3 bg-gray-800 rounded w-16"}),(0,a.jsx)("div",{className:"h-3 bg-gray-800 rounded w-8"})]}),(0,a.jsx)("div",{className:"h-4 bg-gray-800 rounded w-1/2"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-800 rounded"}),(0,a.jsx)("div",{className:"h-8 bg-gray-800 rounded"})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"h-6 bg-gray-800 rounded-full w-16"})})]})]}),r=e=>{let{count:s=8}=e;return(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:[...Array(s)].map(((e,s)=>(0,a.jsx)(t,{},s)))})},d=()=>(0,a.jsx)("div",{className:"min-h-screen pt-14 md:pt-20 bg-deep-black",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"aspect-square bg-gray-800 rounded-lg animate-pulse"}),(0,a.jsx)("div",{className:"flex gap-2",children:[...Array(4)].map(((e,s)=>(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-800 rounded animate-pulse"},s)))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-800 rounded w-3/4 animate-pulse"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-800 rounded w-full animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-800 rounded w-2/3 animate-pulse"})]}),(0,a.jsx)("div",{className:"h-6 bg-gray-800 rounded w-1/2 animate-pulse"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-10 bg-gray-800 rounded animate-pulse"}),(0,a.jsx)("div",{className:"h-10 bg-gray-800 rounded animate-pulse"})]})]})]})})})},202:(e,s,l)=>{l.r(s),l.d(s,{default:()=>x});var a=l(43),t=l(767),r=l(169),d=l(114),n=l(914),i=l(302),c=l(505),o=l(579);const x=()=>{const{id:e}=(0,t.g)(),s=(0,t.Zp)(),{addToCart:l}=(0,r._$)(),{showError:x}=(0,d.h)(),[m,u]=(0,a.useState)(null),[g,h]=(0,a.useState)(!0),[p,y]=(0,a.useState)(null),[b,v]=(0,a.useState)(null),[j,N]=(0,a.useState)(1),[f,w]=(0,a.useState)(0),[k,C]=(0,a.useState)(!1),[I,A]=(0,a.useState)(!0);(0,a.useEffect)((()=>{S()}),[e]),(0,a.useEffect)((()=>{if(!m||!m.images||m.images.length<=1||!I)return;const e=setInterval((()=>{w((e=>(e+1)%m.images.length))}),3e3);return()=>clearInterval(e)}),[m,I]);const S=async()=>{try{h(!0);const s=await c.A.getProductById(e);u(s),s.variations&&s.variations.length>0&&v(s.variations[0])}catch(p){console.error("Error fetching product:",p),y("Kh\xf4ng th\u1ec3 t\u1ea3i th\xf4ng tin s\u1ea3n ph\u1ea9m")}finally{h(!1)}},M=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),_=()=>b?b.price:(null===m||void 0===m?void 0:m.price)||0,z=()=>b?b.original_price:null===m||void 0===m?void 0:m.original_price,Z=()=>{const e=_(),s=z();return s&&s>e?Math.round((s-e)/s*100):0},q=()=>b?b.stock_quantity:(null===m||void 0===m?void 0:m.stock_quantity)||0,D=e=>{w(e),A(!1),setTimeout((()=>{A(!0)}),5e3)};if(g)return(0,o.jsx)(i.uL,{});if(p||!m)return(0,o.jsx)("div",{className:"min-h-screen pt-14 md:pt-20 bg-deep-black",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8",children:(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("div",{className:"text-red-400 text-4xl mb-4",children:"\u274c"}),(0,o.jsx)("h2",{className:"text-luxury-gold text-xl sm:text-2xl font-bold mb-4",children:p||"Kh\xf4ng t\xecm th\u1ea5y s\u1ea3n ph\u1ea9m"}),(0,o.jsx)("button",{onClick:()=>s("/products"),className:"bg-gradient-to-r from-luxury-gold to-luxury-copper text-deep-black px-6 py-3 rounded-lg font-bold hover:shadow-lg transition-all duration-300",children:"Quay l\u1ea1i trang s\u1ea3n ph\u1ea9m"})]})})});const E=m.images&&m.images.length>0?m.images:[m.image_url];return(0,o.jsx)("div",{className:"min-h-screen pt-14 md:pt-20 bg-deep-black",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8",children:[(0,o.jsx)("nav",{className:"mb-4 sm:mb-6",children:(0,o.jsxs)("ol",{className:"flex items-center space-x-2 text-xs sm:text-sm text-soft-gold",children:[(0,o.jsx)("li",{children:(0,o.jsx)("button",{onClick:()=>s("/"),className:"hover:text-luxury-gold transition-colors",children:"Trang ch\u1ee7"})}),(0,o.jsx)("li",{className:"text-luxury-gold/60",children:"\u203a"}),(0,o.jsx)("li",{children:(0,o.jsx)("button",{onClick:()=>s("/products"),className:"hover:text-luxury-gold transition-colors",children:"S\u1ea3n ph\u1ea9m"})}),(0,o.jsx)("li",{className:"text-luxury-gold/60",children:"\u203a"}),(0,o.jsx)("li",{className:"text-luxury-gold font-medium truncate",children:m.name})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[(0,o.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,o.jsxs)("div",{className:"relative bg-charcoal/30 rounded-xl overflow-hidden",style:{aspectRatio:"4/3"},children:[(0,o.jsx)(n.A,{src:E[f],alt:m.name,className:"w-full h-full cursor-pointer",onClick:()=>D(f)}),Z()>0&&(0,o.jsxs)("div",{className:"absolute top-2 sm:top-3 left-2 sm:left-3 bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold",children:["-",Z(),"%"]}),(0,o.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white px-2 py-1 rounded-full text-xs",children:[f+1," / ",E.length]}),(0,o.jsx)("button",{onClick:()=>A(!I),className:"absolute bottom-2 left-2 bg-black/50 text-white px-2 py-1 rounded-full text-xs hover:bg-black/70 transition-colors",children:I?"\u23f8\ufe0f":"\u25b6\ufe0f"})]}),E.length>1&&(0,o.jsx)("div",{className:"flex space-x-1 sm:space-x-2 overflow-x-auto scrollbar-hide",children:E.map(((e,s)=>(0,o.jsx)("button",{onClick:()=>D(s),className:"flex-shrink-0 w-12 sm:w-16 h-12 sm:h-16 rounded-lg overflow-hidden border-2 transition-all duration-300 ".concat(f===s?"border-luxury-gold":"border-luxury-gold/30 hover:border-luxury-gold/60"),children:(0,o.jsx)(n.A,{src:e,alt:"".concat(m.name," ").concat(s+1),className:"w-full h-full"})},s)))})]}),(0,o.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"font-luxury text-2xl sm:text-3xl lg:text-4xl font-bold text-luxury-gold mb-2 sm:mb-3",children:m.name}),(0,o.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"flex items-center",children:(L=Math.floor(m.rating),Array.from({length:5},((e,s)=>(0,o.jsx)("span",{className:"text-lg ".concat(s<L?"text-luxury-gold":"text-gray-600"),children:"\u2605"},s))))}),(0,o.jsxs)("span",{className:"text-soft-gold text-sm",children:["(",m.reviews_count," \u0111\xe1nh gi\xe1)"]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("span",{className:"text-soft-gold text-xs sm:text-sm",children:"Danh m\u1ee5c:"}),(0,o.jsx)("span",{className:"text-luxury-gold font-medium text-sm sm:text-base ml-1",children:m.category})]})]})]}),(0,o.jsxs)("div",{className:"bg-charcoal/30 rounded-xl p-3 sm:p-4",children:[(0,o.jsxs)("div",{className:"flex items-baseline space-x-3",children:[(0,o.jsx)("span",{className:"font-luxury text-2xl sm:text-3xl font-bold text-luxury-gold",children:M(_())}),z()&&z()>_()&&(0,o.jsx)("span",{className:"text-soft-gold/60 line-through text-lg sm:text-xl",children:M(z())})]}),Z()>0&&(0,o.jsxs)("p",{className:"text-green-400 text-sm sm:text-base font-medium mt-1",children:["Ti\u1ebft ki\u1ec7m ",M(z()-_())," (",Z(),"%)"]})]}),m.variations&&m.variations.length>0&&(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("h3",{className:"font-medium text-luxury-gold text-base sm:text-lg",children:"Ch\u1ecdn k\xedch th\u01b0\u1edbc:"}),(0,o.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3",children:m.variations.map(((e,s)=>(0,o.jsxs)("button",{onClick:()=>(e=>{v(e),N(1)})(e),disabled:0===e.stock_quantity,className:"p-3 sm:p-4 rounded-lg border-2 transition-all duration-300 text-sm sm:text-base ".concat((null===b||void 0===b?void 0:b.size)===e.size?"border-luxury-gold bg-luxury-gold/10 text-luxury-gold":0===e.stock_quantity?"border-gray-600 bg-gray-800/50 text-gray-500 cursor-not-allowed":"border-luxury-gold/30 hover:border-luxury-gold/60 text-soft-gold hover:text-luxury-gold"),children:[(0,o.jsx)("div",{className:"font-medium",children:e.size}),(0,o.jsx)("div",{className:"text-xs sm:text-sm",children:M(e.price)}),0===e.stock_quantity&&(0,o.jsx)("div",{className:"text-xs text-red-400 mt-1",children:"H\u1ebft h\xe0ng"})]},s)))})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-soft-gold",children:"T\xecnh tr\u1ea1ng:"}),(0,o.jsx)("span",{className:"font-medium ".concat(q()>0?"text-green-400":"text-red-400"),children:q()>0?"C\xf2n ".concat(q()," s\u1ea3n ph\u1ea9m"):"H\u1ebft h\xe0ng"})]}),q()>0&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("span",{className:"text-soft-gold font-medium text-sm sm:text-base",children:"S\u1ed1 l\u01b0\u1ee3ng:"}),(0,o.jsxs)("div",{className:"flex items-center border border-luxury-gold/30 rounded-lg",children:[(0,o.jsx)("button",{onClick:()=>N(Math.max(1,j-1)),className:"px-3 sm:px-4 py-2 text-luxury-gold hover:bg-luxury-gold/10 transition-colors",children:"\u2212"}),(0,o.jsx)("span",{className:"px-4 sm:px-6 py-2 text-soft-gold font-medium",children:j}),(0,o.jsx)("button",{onClick:()=>N(Math.min(q(),j+1)),className:"px-3 sm:px-4 py-2 text-luxury-gold hover:bg-luxury-gold/10 transition-colors",children:"+"})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("button",{onClick:async()=>{if(!m)return;C(!0);const e={id:m.id,name:m.name,price:_(),image:m.image_url,quantity:j,variation:b?b.size:null};try{await l(e)}catch(p){console.error("Error adding to cart:",p),x("C\xf3 l\u1ed7i x\u1ea3y ra khi th\xeam v\xe0o gi\u1ecf h\xe0ng")}finally{C(!1)}},disabled:k||0===q(),className:"w-full border-2 border-luxury-gold text-luxury-gold bg-transparent px-6 py-3 sm:py-4 rounded-lg font-bold text-base sm:text-lg hover:bg-luxury-gold hover:text-deep-black hover:shadow-lg hover:shadow-luxury-gold/30 transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:k?"\u0110ang th\xeam...":"Th\xeam v\xe0o gi\u1ecf h\xe0ng"}),(0,o.jsx)("button",{onClick:async()=>{if(!m)return;C(!0);const e={id:m.id,name:m.name,price:_(),image:m.image_url,quantity:j,variation:b?b.size:null};try{await l(e),s("/cart")}catch(p){console.error("Error adding to cart:",p),x("C\xf3 l\u1ed7i x\u1ea3y ra khi th\xeam v\xe0o gi\u1ecf h\xe0ng")}finally{C(!1)}},disabled:k||0===q(),className:"w-full bg-gradient-to-r from-luxury-gold to-luxury-copper text-deep-black px-6 py-3 sm:py-4 rounded-lg font-bold text-base sm:text-lg hover:shadow-lg hover:shadow-luxury-gold/30 transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:k?"\u0110ang x\u1eed l\xfd...":"\ud83d\uded2 Mua Ngay"})]})]}),(0,o.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,o.jsx)("h3",{className:"font-luxury text-lg sm:text-xl font-bold text-luxury-gold",children:"M\xf4 t\u1ea3 s\u1ea3n ph\u1ea9m"}),(0,o.jsx)("div",{className:"bg-charcoal/30 rounded-xl p-3 sm:p-4",children:(0,o.jsx)("p",{className:"text-soft-gold leading-relaxed text-sm sm:text-base",children:m.description})})]}),m.tags&&m.tags.length>0&&(0,o.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,o.jsx)("h3",{className:"font-medium text-luxury-gold text-sm sm:text-base",children:"T\u1eeb kh\xf3a:"}),(0,o.jsx)("div",{className:"flex flex-wrap gap-2",children:m.tags.map(((e,s)=>(0,o.jsxs)("span",{className:"px-2 sm:px-3 py-1 bg-luxury-gold/10 border border-luxury-gold/30 rounded-full text-luxury-gold text-xs sm:text-sm",children:["#",e]},s)))})]})]})]})]})});var L}}}]);
//# sourceMappingURL=202.cdec95c7.chunk.js.map