{"version":3,"file":"static/js/490.a274081c.chunk.js","mappings":"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","sources":["pages/CartPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useCart } from '../context/CartContext';\nimport { useAuth } from '../context/AuthContext';\nimport { useNotification } from '../context/NotificationContext';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport IonIcon from '../components/IonIcon';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001';\n\nconst CartPage = () => {\n  const { \n    items, \n    getSubtotal, \n    getShippingFee, \n    getCartTotal, \n    updateCartItem, \n    removeFromCart, \n    clearCart,\n    isGuest \n  } = useCart();\n  const { isAuthenticated, user } = useAuth();\n  const { showCartNotification, showOrderSuccess, showError } = useNotification();\n  const navigate = useNavigate();\n  \n  const [isCheckingOut, setIsCheckingOut] = useState(false);\n  const [checkoutMessage, setCheckoutMessage] = useState('');\n  const [showCheckout, setShowCheckout] = useState(false);\n  \n  // Guest checkout form data\n  const [guestInfo, setGuestInfo] = useState({\n    full_name: '',\n    email: '',\n    phone: '',\n    address: '',\n    note: '',\n    payment_method: 'cod'\n  });\n\n  const handleQuantityChange = async (productId, newQuantity) => {\n    if (newQuantity <= 0) {\n      const result = await removeFromCart(productId);\n      // Notification is already shown in removeFromCart function\n    } else {\n      const result = await updateCartItem(productId, newQuantity);\n      // Notification is already shown in updateCartItem function\n    }\n  };\n\n  const handleRemoveItem = async (productId) => {\n    const result = await removeFromCart(productId);\n    // Notification is already shown in removeFromCart function\n  };\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('vi-VN', {\n      style: 'currency',\n      currency: 'VND'\n    }).format(price);\n  };\n\n  const handleGuestInfoChange = (e) => {\n    const { name, value } = e.target;\n    setGuestInfo(prev => ({ ...prev, [name]: value }));\n  };\n\n  const validateGuestInfo = () => {\n    const { full_name, email, phone, address } = guestInfo;\n    if (!full_name.trim()) return 'Vui lòng nhập họ và tên';\n    if (!email.trim()) return 'Vui lòng nhập email';\n    if (!/\\S+@\\S+\\.\\S+/.test(email)) return 'Email không hợp lệ';\n    if (!phone.trim()) return 'Vui lòng nhập số điện thoại';\n    if (!/^[0-9]{10,11}$/.test(phone.replace(/[^0-9]/g, ''))) return 'Số điện thoại không hợp lệ';\n    if (!address.trim()) return 'Vui lòng nhập địa chỉ';\n    return null;\n  };\n\n  const handleCheckout = async () => {\n    if (items.length === 0) {\n      setCheckoutMessage('Giỏ hàng của bạn đang trống');\n      return;\n    }\n\n    // Validate guest info if not authenticated\n    if (isGuest && !isAuthenticated) {\n      const validationError = validateGuestInfo();\n      if (validationError) {\n        setCheckoutMessage(validationError);\n        return;\n      }\n    }\n\n    setIsCheckingOut(true);\n    setCheckoutMessage('');\n\n    try {\n      // Prepare order data\n      const orderData = {\n        items: items.map(item => ({\n          product_id: item.id,\n          quantity: item.quantity,\n          price: item.price,\n          name: item.name,\n          image_url: item.image_url || item.images?.[0] || ''\n        })),\n        payment_method: guestInfo.payment_method,\n        customer_info: isGuest && !isAuthenticated ? {\n          full_name: guestInfo.full_name,\n          email: guestInfo.email,\n          phone: guestInfo.phone\n        } : {},\n        shipping_address: isGuest && !isAuthenticated ? {\n          address: guestInfo.address\n        } : {},\n        notes: isGuest && !isAuthenticated ? (guestInfo.note || '') : ''\n      };\n\n      const response = await axios.post(`${BACKEND_URL}/api/orders`, orderData);\n      \n      // Show success notification\n      showOrderSuccess({ orderId: response.data.id });\n      \n      // Clear cart after successful order\n      await clearCart();\n      \n      // Reset guest info\n      if (isGuest && !isAuthenticated) {\n        setGuestInfo({\n          full_name: '',\n          email: '',\n          phone: '',\n          address: '',\n          note: '',\n          payment_method: 'cod'\n        });\n      }\n      \n      setShowCheckout(false);\n      \n      // Navigate to order success page with order data\n      navigate('/order-success', { \n        state: { \n          orderData: response.data\n        }\n      });\n      \n    } catch (error) {\n      const errorMessage = error.response?.data?.detail || 'Có lỗi xảy ra khi đặt hàng. Vui lòng thử lại.';\n      setCheckoutMessage(errorMessage);\n      showError(errorMessage);\n    } finally {\n      setIsCheckingOut(false);\n    }\n  };\n\n  if (items.length === 0) {\n    return (\n      <div className=\"min-h-screen pt-16 md:pt-20 bg-deep-black mobile-nav-padding\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"text-center\">\n            <h1 className=\"font-luxury text-xl sm:text-2xl font-bold text-luxury-gold mb-4\">\n              Giỏ Hàng\n            </h1>\n            <div className=\"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-6\">\n              <span className=\"text-4xl mb-3 block\">🛒</span>\n              <h2 className=\"text-lg font-bold text-luxury-gold mb-3\">\n                Giỏ hàng của bạn đang trống\n              </h2>\n              <p className=\"text-soft-gold mb-4 text-sm\">\n                Hãy khám phá các sản phẩm trầm hương cao cấp của chúng tôi\n              </p>\n              <a\n                href=\"/products\"\n                className=\"inline-block bg-gradient-to-r from-luxury-gold to-luxury-copper text-deep-black px-4 py-2 rounded-lg font-bold hover:shadow-lg hover:shadow-luxury-gold/30 transition-all duration-300 transform hover:scale-[1.02] text-sm\"\n              >\n                Mua Sắm Ngay\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen pt-16 md:pt-20 bg-deep-black mobile-nav-padding\">\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6\">\n        \n        {/* Header */}\n        <div className=\"text-center mb-4 sm:mb-6\">\n          <h1 className=\"font-luxury text-xl sm:text-2xl font-bold text-luxury-gold mb-2\">\n            Giỏ Hàng ({items.length} sản phẩm)\n          </h1>\n          {isGuest && !isAuthenticated && (\n            <p className=\"text-soft-gold text-xs\">\n              💡 Bạn đang mua sắm dưới dạng khách. Đăng nhập để lưu thông tin và đặt hàng dễ dàng hơn.\n            </p>\n          )}\n        </div>\n\n        {checkoutMessage && (\n          <div className={`mb-4 p-3 rounded-lg text-center text-sm ${\n            checkoutMessage.includes('thành công') \n              ? 'bg-green-900/30 border border-green-500/30 text-green-300'\n              : 'bg-red-900/30 border border-red-500/30 text-red-300'\n          }`}>\n            {checkoutMessage}\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6\">\n          \n          {/* Cart Items */}\n          <div className=\"lg:col-span-2 space-y-3\">\n            {items.map((item) => (\n              <div \n                key={item.id} \n                className=\"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-3 sm:p-4\"\n              >\n                <div className=\"flex flex-col sm:flex-row gap-3\">\n                  {/* Product Image */}\n                  <div className=\"flex-shrink-0\">\n                    <img\n                      src={item.image || '/placeholder-image.jpg'}\n                      alt={item.name}\n                      className=\"w-full sm:w-16 h-16 object-cover rounded-lg\"\n                    />\n                  </div>\n                  \n                  {/* Product Info */}\n                  <div className=\"flex-1\">\n                    <h3 className=\"font-bold text-luxury-gold text-base mb-1\">\n                      {item.name}\n                    </h3>\n                    <p className=\"text-soft-gold text-xs mb-2\">\n                      {formatPrice(item.price)} / sản phẩm\n                    </p>\n                    \n                    {/* Quantity Controls */}\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-2\">\n                        <button\n                          onClick={() => handleQuantityChange(item.id, item.quantity - 1)}\n                          className=\"w-7 h-7 rounded-full bg-luxury-gold/20 border border-luxury-gold/30 text-luxury-gold hover:bg-luxury-gold/30 transition-colors flex items-center justify-center text-sm\"\n                        >\n                          <IonIcon icon=\"remove-outline\" size={14} />\n                        </button>\n                        <span className=\"text-white font-medium min-w-[1.5rem] text-center text-sm\">\n                          {item.quantity}\n                        </span>\n                        <button\n                          onClick={() => handleQuantityChange(item.id, item.quantity + 1)}\n                          className=\"w-7 h-7 rounded-full bg-luxury-gold/20 border border-luxury-gold/30 text-luxury-gold hover:bg-luxury-gold/30 transition-colors flex items-center justify-center text-sm\"\n                        >\n                          <IonIcon icon=\"add-outline\" size={14} />\n                        </button>\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-3\">\n                        <span className=\"text-luxury-gold font-bold text-sm\">\n                          {formatPrice(item.price * item.quantity)}\n                        </span>\n                        <button\n                          onClick={() => handleRemoveItem(item.id)}\n                          className=\"text-red-400 hover:text-red-300 text-xs underline flex items-center space-x-1\"\n                        >\n                          <IonIcon icon=\"trash-outline\" size={14} />\n                          <span>Xóa</span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* Order Summary */}\n          <div className=\"space-y-4\">\n            \n            {/* Summary Card */}\n            <div className=\"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-3 sm:p-4 sticky top-20\">\n              <h2 className=\"font-luxury text-lg font-bold text-luxury-gold mb-3\">\n                Tóm Tắt Đơn Hàng\n              </h2>\n              \n              <div className=\"space-y-2 mb-4\">\n                <div className=\"flex justify-between text-soft-gold text-sm\">\n                  <span>Tạm tính:</span>\n                  <span>{formatPrice(getSubtotal())}</span>\n                </div>\n                <div className=\"flex justify-between text-soft-gold text-sm\">\n                  <span>Phí vận chuyển:</span>\n                  <span>{formatPrice(getShippingFee())}</span>\n                </div>\n                <div className=\"border-t border-luxury-gold/20 pt-2\">\n                  <div className=\"flex justify-between text-luxury-gold font-bold text-base\">\n                    <span>Tổng cộng:</span>\n                    <span>{formatPrice(getCartTotal())}</span>\n                  </div>\n                </div>\n              </div>\n              \n              {!showCheckout && (\n                <button\n                  onClick={() => setShowCheckout(true)}\n                  className=\"w-full bg-gradient-to-r from-luxury-gold to-luxury-copper text-deep-black px-4 py-2 rounded-lg font-bold hover:shadow-lg hover:shadow-luxury-gold/30 transition-all duration-300 transform hover:scale-[1.02] text-sm flex items-center justify-center space-x-2\"\n                >\n                  <IonIcon icon=\"card-outline\" size={18} color=\"#1a1a1a\" />\n                  <span>Tiến Hành Thanh Toán</span>\n                </button>\n              )}\n            </div>\n\n            {/* Checkout Form */}\n            {showCheckout && (\n              <div className=\"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-3 sm:p-4\">\n                <h3 className=\"font-luxury text-base font-bold text-luxury-gold mb-3\">\n                  Thông Tin Đặt Hàng\n                </h3>\n                \n                {/* Show user info if authenticated */}\n                {isAuthenticated && user ? (\n                  <div className=\"space-y-2 mb-4\">\n                    <p className=\"text-soft-gold text-sm\">\n                      <strong>Khách hàng:</strong> {user.full_name}\n                    </p>\n                    <p className=\"text-soft-gold text-sm\">\n                      <strong>Email:</strong> {user.email}\n                    </p>\n                    <p className=\"text-soft-gold text-sm\">\n                      <strong>SĐT:</strong> {user.phone}\n                    </p>\n                    {user.address && (\n                      <p className=\"text-soft-gold text-sm\">\n                        <strong>Địa chỉ:</strong> {user.address}\n                      </p>\n                    )}\n                  </div>\n                ) : (\n                  /* Guest checkout form */\n                  <div className=\"space-y-3 mb-4\">\n                    <div>\n                      <label className=\"block text-luxury-gold font-medium mb-1 text-xs\">\n                        Họ và Tên *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"full_name\"\n                        value={guestInfo.full_name}\n                        onChange={handleGuestInfoChange}\n                        className=\"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs\"\n                        placeholder=\"Nhập họ và tên\"\n                      />\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                      <div>\n                        <label className=\"block text-luxury-gold font-medium mb-1 text-xs\">\n                          Email *\n                        </label>\n                        <input\n                          type=\"email\"\n                          name=\"email\"\n                          value={guestInfo.email}\n                          onChange={handleGuestInfoChange}\n                          className=\"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs\"\n                          placeholder=\"email@example.com\"\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-luxury-gold font-medium mb-1 text-xs\">\n                          Số Điện Thoại *\n                        </label>\n                        <input\n                          type=\"tel\"\n                          name=\"phone\"\n                          value={guestInfo.phone}\n                          onChange={handleGuestInfoChange}\n                          className=\"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs\"\n                          placeholder=\"0123 456 789\"\n                        />\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-luxury-gold font-medium mb-1 text-xs\">\n                        Địa Chỉ Giao Hàng *\n                      </label>\n                      <textarea\n                        name=\"address\"\n                        value={guestInfo.address}\n                        onChange={handleGuestInfoChange}\n                        rows=\"2\"\n                        className=\"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs resize-none\"\n                        placeholder=\"Nhập địa chỉ giao hàng đầy đủ\"\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-luxury-gold font-medium mb-1 text-xs\">\n                        Ghi Chú (Tùy chọn)\n                      </label>\n                      <textarea\n                        name=\"note\"\n                        value={guestInfo.note}\n                        onChange={handleGuestInfoChange}\n                        rows=\"2\"\n                        className=\"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs resize-none\"\n                        placeholder=\"Ghi chú đặc biệt cho đơn hàng\"\n                      />\n                    </div>\n                  </div>\n                )}\n\n                {/* Payment Method */}\n                <div className=\"mb-4\">\n                  <label className=\"block text-luxury-gold font-medium mb-2 text-xs\">\n                    Phương Thức Thanh Toán\n                  </label>\n                  <div className=\"space-y-1\">\n                    <label className=\"flex items-center space-x-2 cursor-pointer\">\n                      <input\n                        type=\"radio\"\n                        name=\"payment_method\"\n                        value=\"cod\"\n                        checked={guestInfo.payment_method === 'cod'}\n                        onChange={handleGuestInfoChange}\n                        className=\"text-luxury-gold focus:ring-luxury-gold\"\n                      />\n                      <span className=\"text-soft-gold text-xs\">\n                        💵 Thanh toán khi nhận hàng (COD)\n                      </span>\n                    </label>\n                    <label className=\"flex items-center space-x-2 cursor-pointer\">\n                      <input\n                        type=\"radio\"\n                        name=\"payment_method\"\n                        value=\"bank_transfer\"\n                        checked={guestInfo.payment_method === 'bank_transfer'}\n                        onChange={handleGuestInfoChange}\n                        className=\"text-luxury-gold focus:ring-luxury-gold\"\n                      />\n                      <span className=\"text-soft-gold text-xs\">\n                        🏦 Chuyển khoản ngân hàng\n                      </span>\n                    </label>\n                  </div>\n                </div>\n\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={() => setShowCheckout(false)}\n                    className=\"flex-1 bg-charcoal border border-luxury-gold/30 text-soft-gold px-3 py-2 rounded-lg font-medium hover:bg-luxury-gold/10 transition-colors text-xs flex items-center justify-center space-x-1\"\n                  >\n                    <IonIcon icon=\"arrow-back-outline\" size={14} />\n                    <span>Quay Lại</span>\n                  </button>\n                  <button\n                    onClick={handleCheckout}\n                    disabled={isCheckingOut}\n                    className=\"flex-1 bg-gradient-to-r from-luxury-gold to-luxury-copper text-deep-black px-3 py-2 rounded-lg font-bold hover:shadow-lg hover:shadow-luxury-gold/30 transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-xs flex items-center justify-center space-x-1\"\n                  >\n                    <IonIcon icon=\"checkmark-outline\" size={14} color=\"#1a1a1a\" />\n                    <span>{isCheckingOut ? 'Đang Xử Lý...' : 'Đặt Hàng'}</span>\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CartPage;"],"names":["CartPage","items","getSubtotal","getShippingFee","getCartTotal","updateCartItem","removeFromCart","clearCart","isGuest","useCart","isAuthenticated","user","useAuth","showCartNotification","showOrderSuccess","showError","useNotification","navigate","useNavigate","isCheckingOut","setIsCheckingOut","useState","checkoutMessage","setCheckoutMessage","showCheckout","setShowCheckout","guestInfo","setGuestInfo","full_name","email","phone","address","note","payment_method","handleQuantityChange","async","productId","newQuantity","formatPrice","price","Intl","NumberFormat","style","currency","format","handleGuestInfoChange","e","name","value","target","prev","_objectSpread","length","_jsx","className","children","_jsxs","href","concat","includes","map","item","src","image","alt","onClick","id","quantity","IonIcon","icon","size","handleRemoveItem","color","type","onChange","placeholder","rows","checked","validationError","validateGuestInfo","trim","test","replace","orderData","_item$images","product_id","image_url","images","customer_info","shipping_address","notes","response","axios","post","process","orderId","data","state","error","_error$response","_error$response$data","errorMessage","detail","disabled"],"sourceRoot":""}