"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[265],{302:(e,s,t)=>{t.d(s,{Vp:()=>r,uL:()=>c});t(43);var a=t(579);const l=()=>(0,a.jsxs)("div",{className:"bg-deep-black/60 rounded-lg overflow-hidden backdrop-blur-sm border border-luxury-gold/20 animate-pulse",children:[(0,a.jsx)("div",{className:"aspect-square bg-gray-800"}),(0,a.jsxs)("div",{className:"p-2 sm:p-3 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-800 rounded w-3/4"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"h-3 bg-gray-800 rounded w-full"}),(0,a.jsx)("div",{className:"h-3 bg-gray-800 rounded w-2/3"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-3 bg-gray-800 rounded w-16"}),(0,a.jsx)("div",{className:"h-3 bg-gray-800 rounded w-8"})]}),(0,a.jsx)("div",{className:"h-4 bg-gray-800 rounded w-1/2"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-800 rounded"}),(0,a.jsx)("div",{className:"h-8 bg-gray-800 rounded"})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"h-6 bg-gray-800 rounded-full w-16"})})]})]}),r=e=>{let{count:s=8}=e;return(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:[...Array(s)].map(((e,s)=>(0,a.jsx)(l,{},s)))})},c=()=>(0,a.jsx)("div",{className:"min-h-screen pt-14 md:pt-20 bg-deep-black",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"aspect-square bg-gray-800 rounded-lg animate-pulse"}),(0,a.jsx)("div",{className:"flex gap-2",children:[...Array(4)].map(((e,s)=>(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-800 rounded animate-pulse"},s)))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-800 rounded w-3/4 animate-pulse"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-800 rounded w-full animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-800 rounded w-2/3 animate-pulse"})]}),(0,a.jsx)("div",{className:"h-6 bg-gray-800 rounded w-1/2 animate-pulse"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-10 bg-gray-800 rounded animate-pulse"}),(0,a.jsx)("div",{className:"h-10 bg-gray-800 rounded animate-pulse"})]})]})]})})})},265:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(43),l=t(169),r=t(729),c=t(114),i=t(767),n=t(555),d=t(986),o=t(579);const x=["src","alt","className","placeholder"],m=e=>{let{src:s,alt:t,className:l,placeholder:r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmNWY1ZjUiLz48L3N2Zz4="}=e,c=(0,d.A)(e,x);const[i,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[g,p]=(0,a.useState)(!1),b=(0,a.useRef)(null);(0,a.useEffect)((()=>{const e=new IntersectionObserver((s=>{let[t]=s;t.isIntersecting&&(h(!0),e.disconnect())}),{threshold:.1});return b.current&&e.observe(b.current),()=>e.disconnect()}),[]);return(0,o.jsxs)("div",(0,n.A)((0,n.A)({ref:b,className:"relative overflow-hidden ".concat(l)},c),{},{children:[!i&&(0,o.jsx)("div",{className:"absolute inset-0 bg-gray-800 animate-pulse"}),u&&!g&&(0,o.jsx)("img",{src:s,alt:t,className:"w-full h-full object-cover transition-opacity duration-300 ".concat(i?"opacity-100":"opacity-0"),onLoad:()=>{m(!0)},onError:()=>{p(!0)},loading:"lazy"}),g&&(0,o.jsx)("div",{className:"absolute inset-0 bg-gray-800 flex items-center justify-center",children:(0,o.jsx)("div",{className:"text-gray-400 text-sm",children:"Kh\xf4ng th\u1ec3 t\u1ea3i h\xecnh \u1ea3nh"})})]}))},u=e=>{let{product:s,onClick:t}=e;const{addToCart:n,isItemInCart:d,getItemQuantity:x}=(0,l._$)(),{isAuthenticated:u}=(0,r.As)(),{showCartNotification:h,showError:g}=(0,c.h)(),p=(0,i.Zp)(),[b,y]=(0,a.useState)(!1),j=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),v=async e=>{if(e.stopPropagation(),s&&s.id){y(!0);try{const e=await n(s,1);e.success?console.log("Product added to cart successfully"):g(e.error||"Kh\xf4ng th\u1ec3 th\xeam v\xe0o gi\u1ecf h\xe0ng")}catch(t){g("C\xf3 l\u1ed7i x\u1ea3y ra khi th\xeam s\u1ea3n ph\u1ea9m v\xe0o gi\u1ecf h\xe0ng")}finally{y(!1)}}else g("S\u1ea3n ph\u1ea9m kh\xf4ng h\u1ee3p l\u1ec7")},N=(f=s.original_price,w=s.price,!f||f<=w?0:Math.round((f-w)/f*100));var f,w;const k=d(s.id),C=x(s.id);return(0,o.jsxs)("div",{className:"bg-deep-black/60 rounded-lg overflow-hidden backdrop-blur-sm border border-luxury-gold/20 hover:border-luxury-gold/40 transition-all duration-300 transform hover:scale-105 cursor-pointer shadow-lg hover:shadow-luxury-gold/20",onClick:()=>{p("/products/".concat(s.id))},children:[(0,o.jsxs)("div",{className:"relative aspect-square bg-gradient-to-br from-luxury-gold/20 to-luxury-copper/20 flex items-center justify-center overflow-hidden",children:[(0,o.jsx)(m,{src:s.image_url,alt:s.name,className:"w-full h-full transition-transform duration-300 hover:scale-110"}),N>0&&(0,o.jsxs)("div",{className:"absolute top-1 left-1 bg-red-500 text-white px-1 py-0.5 rounded text-xs font-bold",children:["-",N,"%"]}),s.featured&&(0,o.jsx)("div",{className:"absolute top-1 right-1 bg-luxury-gold text-deep-black px-1 py-0.5 rounded text-xs font-bold",children:"N\u1ed5i B\u1eadt"}),k&&(0,o.jsxs)("div",{className:"absolute top-1 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-1 py-0.5 rounded text-xs font-bold",children:["Trong gi\u1ecf: ",C]}),!s.in_stock&&(0,o.jsx)("div",{className:"absolute inset-0 bg-deep-black/70 flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-white font-bold text-xs",children:"H\u1ebft H\xe0ng"})})]}),(0,o.jsxs)("div",{className:"p-2 sm:p-3 space-y-1.5 sm:space-y-2",children:[(0,o.jsx)("h3",{className:"font-luxury text-xs sm:text-sm font-bold text-luxury-gold line-clamp-2 leading-tight",children:s.name}),(0,o.jsx)("p",{className:"text-soft-gold text-2xs sm:text-xs leading-tight line-clamp-2 mb-1.5",children:s.description}),(0,o.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"flex text-yellow-400 text-xs",children:[...Array(5)].map(((e,t)=>(0,o.jsx)("span",{className:t<Math.floor(s.rating)?"text-yellow-400":"text-gray-500",children:"\u2605"},t)))}),(0,o.jsxs)("span",{className:"text-soft-gold text-2xs sm:text-xs ml-1",children:["(",s.reviews_count,")"]})]}),(0,o.jsxs)("div",{className:"text-2xs sm:text-xs text-soft-gold",children:[s.rating,"/5"]})]}),(0,o.jsxs)("div",{className:"space-y-1 mb-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,o.jsx)("span",{className:"text-luxury-gold font-bold text-xs sm:text-sm",children:j(s.price)}),s.original_price&&s.original_price>s.price&&(0,o.jsx)("span",{className:"text-soft-gold/60 text-2xs sm:text-xs line-through",children:j(s.original_price)})]}),N>0&&(0,o.jsxs)("div",{className:"text-green-400 text-2xs sm:text-xs font-semibold",children:["Ti\u1ebft ki\u1ec7m ",j(s.original_price-s.price)]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,o.jsxs)("span",{className:"text-soft-gold text-2xs sm:text-xs",children:["C\xf2n l\u1ea1i: ",s.stock_quantity," s\u1ea3n ph\u1ea9m"]}),s.stock_quantity<=5&&(0,o.jsx)("span",{className:"text-red-400 text-2xs sm:text-xs font-semibold",children:"S\u1eafp h\u1ebft h\xe0ng!"})]}),(0,o.jsx)("button",{className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 rounded-lg font-bold text-xs sm:text-sm transition-all duration-300 shadow-md ".concat(s.in_stock?k?"bg-green-600 hover:bg-green-700 text-white":"bg-luxury-gold hover:bg-luxury-copper text-deep-black":"bg-gray-500 text-gray-300 cursor-not-allowed"," disabled:opacity-50 disabled:cursor-not-allowed"),disabled:!s.in_stock||b,onClick:v,children:b?"\u0110ang th\xeam...":s.in_stock?k?"Th\xeam n\u1eefa (".concat(C,")"):"Th\xeam v\xe0o gi\u1ecf":"H\u1ebft H\xe0ng"}),s.in_stock&&(0,o.jsx)("button",{className:"w-full bg-transparent border border-luxury-gold text-luxury-gold px-2 py-1.5 sm:px-3 sm:py-2 rounded-lg font-bold text-xs sm:text-sm hover:bg-luxury-gold hover:text-deep-black transition-all duration-300",onClick:e=>{e.stopPropagation(),v(e).then((()=>{p("/cart")}))},children:"Mua Ngay"}),(0,o.jsx)("div",{className:"flex justify-center mt-1.5",children:(0,o.jsx)("span",{className:"inline-block bg-luxury-gold/20 text-luxury-gold px-1.5 py-0.5 rounded-full text-2xs sm:text-xs",children:s.category})})]})]})};var h=t(302),g=t(505),p=t(325),b=t(906);const y=()=>{const[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)([]),[r,c]=(0,a.useState)([]),[i,n]=(0,a.useState)(!0),[d,x]=(0,a.useState)(null),[m,y]=(0,a.useState)("all"),[j,v]=(0,a.useState)(""),[N,f]=(0,a.useState)("featured"),[w,k]=(0,a.useState)(!1);(0,a.useEffect)((()=>{C(),I()}),[]);const C=async()=>{try{n(!0);const e=await g.A.getAllProducts();s(e),l(e)}catch(e){console.error("Error fetching products:",e),x("Kh\xf4ng th\u1ec3 t\u1ea3i s\u1ea3n ph\u1ea9m. Vui l\xf2ng th\u1eed l\u1ea1i sau.")}finally{n(!1)}},I=async()=>{try{const e=await g.A.getCategories();c(e.categories)}catch(s){console.error("Error fetching categories:",s);const t=[...new Set(e.map((e=>e.category)))];c(t)}},S=(0,a.useMemo)((()=>(0,p.sg)((e=>{v(e)}),300)),[]);(0,a.useEffect)((()=>{let s=[...e];switch(j&&(s=s.filter((e=>e.name.toLowerCase().includes(j.toLowerCase())||e.description.toLowerCase().includes(j.toLowerCase())||e.category.toLowerCase().includes(j.toLowerCase())))),"all"!==m&&(s=s.filter((e=>e.category===m))),w&&(s=s.filter((e=>e.is_featured))),N){case"price-low":s.sort(((e,s)=>e.price-s.price));break;case"price-high":s.sort(((e,s)=>s.price-e.price));break;case"name":s.sort(((e,s)=>e.name.localeCompare(s.name)));break;default:s.sort(((e,s)=>s.is_featured-e.is_featured))}l(s)}),[e,j,m,N,w]);const A="all"!==m||j||"featured"!==N||w;return i?(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8 pt-20",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-luxury-gold mb-4",children:"S\u1ea3n Ph\u1ea9m"}),(0,o.jsx)("p",{className:"text-gray-300",children:"\u0110ang t\u1ea3i s\u1ea3n ph\u1ea9m..."})]}),(0,o.jsx)(h.Vp,{})]}):d?(0,o.jsx)("div",{className:"container mx-auto px-4 py-8 pt-20",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-luxury-gold mb-4",children:"S\u1ea3n Ph\u1ea9m"}),(0,o.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-6 max-w-md mx-auto",children:[(0,o.jsx)("p",{className:"text-red-400 mb-4",children:d}),(0,o.jsxs)("button",{onClick:C,className:"bg-luxury-gold text-deep-black px-6 py-3 rounded-full font-bold hover:bg-luxury-copper transition-colors flex items-center space-x-2",children:[(0,o.jsx)(b.A,{icon:"refresh-outline",size:20,color:"#1a1a1a"}),(0,o.jsx)("span",{children:"Th\u1eed L\u1ea1i"})]})]})]})}):(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8 pt-20",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-luxury-gold mb-4",children:"S\u1ea3n Ph\u1ea9m"}),(0,o.jsx)("p",{className:"text-gray-300",children:"Kh\xe1m ph\xe1 b\u1ed9 s\u01b0u t\u1eadp tr\u1ea7m h\u01b0\u01a1ng cao c\u1ea5p"})]}),(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("div",{className:"bg-deep-black/50 rounded-lg p-4 mb-4",children:(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("input",{type:"text",placeholder:"T\xecm ki\u1ebfm s\u1ea3n ph\u1ea9m...",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-luxury-gold transition-colors",onChange:e=>S(e.target.value)})}),(0,o.jsx)("div",{children:(0,o.jsxs)("select",{value:m,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-luxury-gold transition-colors",children:[(0,o.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 danh m\u1ee5c"}),r.map((e=>(0,o.jsx)("option",{value:e,children:e},e)))]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("select",{value:N,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-luxury-gold transition-colors",children:[(0,o.jsx)("option",{value:"featured",children:"N\u1ed5i b\u1eadt"}),(0,o.jsx)("option",{value:"price-low",children:"Gi\xe1 th\u1ea5p \u0111\u1ebfn cao"}),(0,o.jsx)("option",{value:"price-high",children:"Gi\xe1 cao \u0111\u1ebfn th\u1ea5p"}),(0,o.jsx)("option",{value:"name",children:"T\xean A-Z"})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("label",{className:"flex items-center space-x-2 px-4 py-3 bg-white/10 border border-white/20 rounded-lg cursor-pointer hover:bg-white/20 transition-colors",children:[(0,o.jsx)("input",{type:"checkbox",checked:w,onChange:e=>k(e.target.checked),className:"accent-luxury-gold"}),(0,o.jsx)("span",{className:"text-white text-sm",children:"Ch\u1ec9 s\u1ea3n ph\u1ea9m n\u1ed5i b\u1eadt"})]})})]})}),A&&(0,o.jsx)("div",{className:"text-center",children:(0,o.jsxs)("button",{onClick:()=>{y("all"),v(""),f("featured"),k(!1)},className:"text-luxury-gold hover:text-luxury-copper transition-colors text-xs sm:text-sm underline flex items-center space-x-1",children:[(0,o.jsx)(b.A,{icon:"close-outline",size:14}),(0,o.jsx)("span",{children:"X\xf3a b\u1ed9 l\u1ecdc"})]})})]}),(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsxs)("p",{className:"text-gray-300 text-sm",children:["Hi\u1ec3n th\u1ecb ",t.length," s\u1ea3n ph\u1ea9m",j&&(0,o.jsxs)("span",{className:"text-luxury-gold",children:[' cho "',j,'"']})]})}),(0,o.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:t.map((e=>(0,o.jsx)(u,{product:e},e.id)))}),0===t.length&&(0,o.jsx)("div",{className:"text-center py-12",children:(0,o.jsxs)("div",{className:"text-gray-400 mb-4",children:[(0,o.jsx)("svg",{className:"mx-auto h-12 w-12 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"Kh\xf4ng t\xecm th\u1ea5y s\u1ea3n ph\u1ea9m"}),(0,o.jsx)("p",{className:"text-sm text-gray-400",children:"Th\u1eed thay \u0111\u1ed5i b\u1ed9 l\u1ecdc ho\u1eb7c t\u1eeb kh\xf3a t\xecm ki\u1ebfm"})]})})]})}}}]);
//# sourceMappingURL=265.e961ebe0.chunk.js.map