{"version":3,"file":"static/js/490.7f0402ca.chunk.js","mappings":"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","sources":["pages/CartPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useCart } from '../context/CartContext';\nimport { useAuth } from '../context/AuthContext';\nimport { useNotification } from '../context/NotificationContext';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001';\n\nconst CartPage = () => {\n  const { \n    items, \n    getSubtotal, \n    getShippingFee, \n    getCartTotal, \n    updateCartItem, \n    removeFromCart, \n    clearCart,\n    isGuest \n  } = useCart();\n  const { isAuthenticated, user } = useAuth();\n  const { showCartNotification, showOrderSuccess, showError } = useNotification();\n  const navigate = useNavigate();\n  \n  const [isCheckingOut, setIsCheckingOut] = useState(false);\n  const [checkoutMessage, setCheckoutMessage] = useState('');\n  const [showCheckout, setShowCheckout] = useState(false);\n  \n  // Guest checkout form data\n  const [guestInfo, setGuestInfo] = useState({\n    full_name: '',\n    email: '',\n    phone: '',\n    address: '',\n    note: '',\n    payment_method: 'cod'\n  });\n\n  const handleQuantityChange = async (productId, newQuantity) => {\n    if (newQuantity <= 0) {\n      const result = await removeFromCart(productId);\n      // Notification is already shown in removeFromCart function\n    } else {\n      const result = await updateCartItem(productId, newQuantity);\n      // Notification is already shown in updateCartItem function\n    }\n  };\n\n  const handleRemoveItem = async (productId) => {\n    const result = await removeFromCart(productId);\n    // Notification is already shown in removeFromCart function\n  };\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('vi-VN', {\n      style: 'currency',\n      currency: 'VND'\n    }).format(price);\n  };\n\n  const handleGuestInfoChange = (e) => {\n    const { name, value } = e.target;\n    setGuestInfo(prev => ({ ...prev, [name]: value }));\n  };\n\n  const validateGuestInfo = () => {\n    const { full_name, email, phone, address } = guestInfo;\n    if (!full_name.trim()) return 'Vui l√≤ng nh·∫≠p h·ªç v√† t√™n';\n    if (!email.trim()) return 'Vui l√≤ng nh·∫≠p email';\n    if (!/\\S+@\\S+\\.\\S+/.test(email)) return 'Email kh√¥ng h·ª£p l·ªá';\n    if (!phone.trim()) return 'Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i';\n    if (!/^[0-9]{10,11}$/.test(phone.replace(/[^0-9]/g, ''))) return 'S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá';\n    if (!address.trim()) return 'Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ';\n    return null;\n  };\n\n  const handleCheckout = async () => {\n    if (items.length === 0) {\n      setCheckoutMessage('Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng');\n      return;\n    }\n\n    // Validate guest info if not authenticated\n    if (isGuest && !isAuthenticated) {\n      const validationError = validateGuestInfo();\n      if (validationError) {\n        setCheckoutMessage(validationError);\n        return;\n      }\n    }\n\n    setIsCheckingOut(true);\n    setCheckoutMessage('');\n\n    try {\n      // Prepare order data\n      const orderData = {\n        items: items.map(item => ({\n          product_id: item.id,\n          quantity: item.quantity,\n          price: item.price,\n          name: item.name,\n          image_url: item.image_url || item.images?.[0] || ''\n        })),\n        payment_method: guestInfo.payment_method,\n        customer_info: isGuest && !isAuthenticated ? {\n          full_name: guestInfo.full_name,\n          email: guestInfo.email,\n          phone: guestInfo.phone\n        } : {},\n        shipping_address: isGuest && !isAuthenticated ? {\n          address: guestInfo.address\n        } : {},\n        notes: isGuest && !isAuthenticated ? (guestInfo.note || '') : ''\n      };\n\n      const response = await axios.post(`${BACKEND_URL}/api/orders`, orderData);\n      \n      // Show success notification\n      showOrderSuccess({ orderId: response.data.id });\n      \n      // Clear cart after successful order\n      await clearCart();\n      \n      // Reset guest info\n      if (isGuest && !isAuthenticated) {\n        setGuestInfo({\n          full_name: '',\n          email: '',\n          phone: '',\n          address: '',\n          note: '',\n          payment_method: 'cod'\n        });\n      }\n      \n      setShowCheckout(false);\n      \n      // Navigate to order success page with order data\n      navigate('/order-success', { \n        state: { \n          orderData: response.data\n        }\n      });\n      \n    } catch (error) {\n      const errorMessage = error.response?.data?.detail || 'C√≥ l·ªói x·∫£y ra khi ƒë·∫∑t h√†ng. Vui l√≤ng th·ª≠ l·∫°i.';\n      setCheckoutMessage(errorMessage);\n      showError(errorMessage);\n    } finally {\n      setIsCheckingOut(false);\n    }\n  };\n\n  if (items.length === 0) {\n    return (\n      <div className=\"min-h-screen pt-16 md:pt-20 bg-deep-black mobile-nav-padding\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"text-center\">\n            <h1 className=\"font-luxury text-xl sm:text-2xl font-bold text-luxury-gold mb-4\">\n              Gi·ªè H√†ng\n            </h1>\n            <div className=\"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-6\">\n              <span className=\"text-4xl mb-3 block\">üõí</span>\n              <h2 className=\"text-lg font-bold text-luxury-gold mb-3\">\n                Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng\n              </h2>\n              <p className=\"text-soft-gold mb-4 text-sm\">\n                H√£y kh√°m ph√° c√°c s·∫£n ph·∫©m tr·∫ßm h∆∞∆°ng cao c·∫•p c·ªßa ch√∫ng t√¥i\n              </p>\n              <a\n                href=\"/products\"\n                className=\"inline-block bg-gradient-to-r from-luxury-gold to-luxury-copper text-deep-black px-4 py-2 rounded-lg font-bold hover:shadow-lg hover:shadow-luxury-gold/30 transition-all duration-300 transform hover:scale-[1.02] text-sm\"\n              >\n                Mua S·∫Øm Ngay\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen pt-16 md:pt-20 bg-deep-black mobile-nav-padding\">\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6\">\n        \n        {/* Header */}\n        <div className=\"text-center mb-4 sm:mb-6\">\n          <h1 className=\"font-luxury text-xl sm:text-2xl font-bold text-luxury-gold mb-2\">\n            Gi·ªè H√†ng ({items.length} s·∫£n ph·∫©m)\n          </h1>\n          {isGuest && !isAuthenticated && (\n            <p className=\"text-soft-gold text-xs\">\n              üí° B·∫°n ƒëang mua s·∫Øm d∆∞·ªõi d·∫°ng kh√°ch. ƒêƒÉng nh·∫≠p ƒë·ªÉ l∆∞u th√¥ng tin v√† ƒë·∫∑t h√†ng d·ªÖ d√†ng h∆°n.\n            </p>\n          )}\n        </div>\n\n        {checkoutMessage && (\n          <div className={`mb-4 p-3 rounded-lg text-center text-sm ${\n            checkoutMessage.includes('th√†nh c√¥ng') \n              ? 'bg-green-900/30 border border-green-500/30 text-green-300'\n              : 'bg-red-900/30 border border-red-500/30 text-red-300'\n          }`}>\n            {checkoutMessage}\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6\">\n          \n          {/* Cart Items */}\n          <div className=\"lg:col-span-2 space-y-3\">\n            {items.map((item) => (\n              <div \n                key={item.id} \n                className=\"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-3 sm:p-4\"\n              >\n                <div className=\"flex flex-col sm:flex-row gap-3\">\n                  {/* Product Image */}\n                  <div className=\"flex-shrink-0\">\n                    <img\n                      src={item.image || '/placeholder-image.jpg'}\n                      alt={item.name}\n                      className=\"w-full sm:w-16 h-16 object-cover rounded-lg\"\n                    />\n                  </div>\n                  \n                  {/* Product Info */}\n                  <div className=\"flex-1\">\n                    <h3 className=\"font-bold text-luxury-gold text-base mb-1\">\n                      {item.name}\n                    </h3>\n                    <p className=\"text-soft-gold text-xs mb-2\">\n                      {formatPrice(item.price)} / s·∫£n ph·∫©m\n                    </p>\n                    \n                    {/* Quantity Controls */}\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-2\">\n                        <button\n                          onClick={() => handleQuantityChange(item.id, item.quantity - 1)}\n                          className=\"w-7 h-7 rounded-full bg-luxury-gold/20 border border-luxury-gold/30 text-luxury-gold hover:bg-luxury-gold/30 transition-colors flex items-center justify-center text-sm\"\n                        >\n                          -\n                        </button>\n                        <span className=\"text-white font-medium min-w-[1.5rem] text-center text-sm\">\n                          {item.quantity}\n                        </span>\n                        <button\n                          onClick={() => handleQuantityChange(item.id, item.quantity + 1)}\n                          className=\"w-7 h-7 rounded-full bg-luxury-gold/20 border border-luxury-gold/30 text-luxury-gold hover:bg-luxury-gold/30 transition-colors flex items-center justify-center text-sm\"\n                        >\n                          +\n                        </button>\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-3\">\n                        <span className=\"text-luxury-gold font-bold text-sm\">\n                          {formatPrice(item.price * item.quantity)}\n                        </span>\n                        <button\n                          onClick={() => handleRemoveItem(item.id)}\n                          className=\"text-red-400 hover:text-red-300 text-xs underline\"\n                        >\n                          X√≥a\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* Order Summary */}\n          <div className=\"space-y-4\">\n            \n            {/* Summary Card */}\n            <div className=\"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-3 sm:p-4 sticky top-20\">\n              <h2 className=\"font-luxury text-lg font-bold text-luxury-gold mb-3\">\n                T√≥m T·∫Øt ƒê∆°n H√†ng\n              </h2>\n              \n              <div className=\"space-y-2 mb-4\">\n                <div className=\"flex justify-between text-soft-gold text-sm\">\n                  <span>T·∫°m t√≠nh:</span>\n                  <span>{formatPrice(getSubtotal())}</span>\n                </div>\n                <div className=\"flex justify-between text-soft-gold text-sm\">\n                  <span>Ph√≠ v·∫≠n chuy·ªÉn:</span>\n                  <span>{formatPrice(getShippingFee())}</span>\n                </div>\n                <div className=\"border-t border-luxury-gold/20 pt-2\">\n                  <div className=\"flex justify-between text-luxury-gold font-bold text-base\">\n                    <span>T·ªïng c·ªông:</span>\n                    <span>{formatPrice(getCartTotal())}</span>\n                  </div>\n                </div>\n              </div>\n              \n              {!showCheckout && (\n                <button\n                  onClick={() => setShowCheckout(true)}\n                  className=\"w-full bg-gradient-to-r from-luxury-gold to-luxury-copper text-deep-black px-4 py-2 rounded-lg font-bold hover:shadow-lg hover:shadow-luxury-gold/30 transition-all duration-300 transform hover:scale-[1.02] text-sm\"\n                >\n                  Ti·∫øn H√†nh Thanh To√°n\n                </button>\n              )}\n            </div>\n\n            {/* Checkout Form */}\n            {showCheckout && (\n              <div className=\"bg-charcoal/50 backdrop-blur-sm rounded-2xl border border-luxury-gold/20 p-3 sm:p-4\">\n                <h3 className=\"font-luxury text-base font-bold text-luxury-gold mb-3\">\n                  Th√¥ng Tin ƒê·∫∑t H√†ng\n                </h3>\n                \n                {/* Show user info if authenticated */}\n                {isAuthenticated && user ? (\n                  <div className=\"space-y-2 mb-4\">\n                    <p className=\"text-soft-gold text-sm\">\n                      <strong>Kh√°ch h√†ng:</strong> {user.full_name}\n                    </p>\n                    <p className=\"text-soft-gold text-sm\">\n                      <strong>Email:</strong> {user.email}\n                    </p>\n                    <p className=\"text-soft-gold text-sm\">\n                      <strong>SƒêT:</strong> {user.phone}\n                    </p>\n                    {user.address && (\n                      <p className=\"text-soft-gold text-sm\">\n                        <strong>ƒê·ªãa ch·ªâ:</strong> {user.address}\n                      </p>\n                    )}\n                  </div>\n                ) : (\n                  /* Guest checkout form */\n                  <div className=\"space-y-3 mb-4\">\n                    <div>\n                      <label className=\"block text-luxury-gold font-medium mb-1 text-xs\">\n                        H·ªç v√† T√™n *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"full_name\"\n                        value={guestInfo.full_name}\n                        onChange={handleGuestInfoChange}\n                        className=\"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs\"\n                        placeholder=\"Nh·∫≠p h·ªç v√† t√™n\"\n                      />\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                      <div>\n                        <label className=\"block text-luxury-gold font-medium mb-1 text-xs\">\n                          Email *\n                        </label>\n                        <input\n                          type=\"email\"\n                          name=\"email\"\n                          value={guestInfo.email}\n                          onChange={handleGuestInfoChange}\n                          className=\"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs\"\n                          placeholder=\"email@example.com\"\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-luxury-gold font-medium mb-1 text-xs\">\n                          S·ªë ƒêi·ªán Tho·∫°i *\n                        </label>\n                        <input\n                          type=\"tel\"\n                          name=\"phone\"\n                          value={guestInfo.phone}\n                          onChange={handleGuestInfoChange}\n                          className=\"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs\"\n                          placeholder=\"0123 456 789\"\n                        />\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-luxury-gold font-medium mb-1 text-xs\">\n                        ƒê·ªãa Ch·ªâ Giao H√†ng *\n                      </label>\n                      <textarea\n                        name=\"address\"\n                        value={guestInfo.address}\n                        onChange={handleGuestInfoChange}\n                        rows=\"2\"\n                        className=\"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs resize-none\"\n                        placeholder=\"Nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng ƒë·∫ßy ƒë·ªß\"\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-luxury-gold font-medium mb-1 text-xs\">\n                        Ghi Ch√∫ (T√πy ch·ªçn)\n                      </label>\n                      <textarea\n                        name=\"note\"\n                        value={guestInfo.note}\n                        onChange={handleGuestInfoChange}\n                        rows=\"2\"\n                        className=\"w-full px-3 py-2 bg-deep-black/50 border border-luxury-gold/30 rounded-lg text-white placeholder-soft-gold/60 focus:outline-none focus:ring-2 focus:ring-luxury-gold/50 text-xs resize-none\"\n                        placeholder=\"Ghi ch√∫ ƒë·∫∑c bi·ªát cho ƒë∆°n h√†ng\"\n                      />\n                    </div>\n                  </div>\n                )}\n\n                {/* Payment Method */}\n                <div className=\"mb-4\">\n                  <label className=\"block text-luxury-gold font-medium mb-2 text-xs\">\n                    Ph∆∞∆°ng Th·ª©c Thanh To√°n\n                  </label>\n                  <div className=\"space-y-1\">\n                    <label className=\"flex items-center space-x-2 cursor-pointer\">\n                      <input\n                        type=\"radio\"\n                        name=\"payment_method\"\n                        value=\"cod\"\n                        checked={guestInfo.payment_method === 'cod'}\n                        onChange={handleGuestInfoChange}\n                        className=\"text-luxury-gold focus:ring-luxury-gold\"\n                      />\n                      <span className=\"text-soft-gold text-xs\">\n                        üíµ Thanh to√°n khi nh·∫≠n h√†ng (COD)\n                      </span>\n                    </label>\n                    <label className=\"flex items-center space-x-2 cursor-pointer\">\n                      <input\n                        type=\"radio\"\n                        name=\"payment_method\"\n                        value=\"bank_transfer\"\n                        checked={guestInfo.payment_method === 'bank_transfer'}\n                        onChange={handleGuestInfoChange}\n                        className=\"text-luxury-gold focus:ring-luxury-gold\"\n                      />\n                      <span className=\"text-soft-gold text-xs\">\n                        üè¶ Chuy·ªÉn kho·∫£n ng√¢n h√†ng\n                      </span>\n                    </label>\n                  </div>\n                </div>\n\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={() => setShowCheckout(false)}\n                    className=\"flex-1 bg-charcoal border border-luxury-gold/30 text-soft-gold px-3 py-2 rounded-lg font-medium hover:bg-luxury-gold/10 transition-colors text-xs\"\n                  >\n                    Quay L·∫°i\n                  </button>\n                  <button\n                    onClick={handleCheckout}\n                    disabled={isCheckingOut}\n                    className=\"flex-1 bg-gradient-to-r from-luxury-gold to-luxury-copper text-deep-black px-3 py-2 rounded-lg font-bold hover:shadow-lg hover:shadow-luxury-gold/30 transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-xs\"\n                  >\n                    {isCheckingOut ? 'ƒêang X·ª≠ L√Ω...' : 'ƒê·∫∑t H√†ng'}\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CartPage;"],"names":["CartPage","items","getSubtotal","getShippingFee","getCartTotal","updateCartItem","removeFromCart","clearCart","isGuest","useCart","isAuthenticated","user","useAuth","showCartNotification","showOrderSuccess","showError","useNotification","navigate","useNavigate","isCheckingOut","setIsCheckingOut","useState","checkoutMessage","setCheckoutMessage","showCheckout","setShowCheckout","guestInfo","setGuestInfo","full_name","email","phone","address","note","payment_method","handleQuantityChange","async","productId","newQuantity","formatPrice","price","Intl","NumberFormat","style","currency","format","handleGuestInfoChange","e","name","value","target","prev","_objectSpread","length","_jsx","className","children","_jsxs","href","concat","includes","map","item","src","image","alt","onClick","id","quantity","handleRemoveItem","type","onChange","placeholder","rows","checked","validationError","validateGuestInfo","trim","test","replace","orderData","_item$images","product_id","image_url","images","customer_info","shipping_address","notes","response","axios","post","process","orderId","data","state","error","_error$response","_error$response$data","errorMessage","detail","disabled"],"sourceRoot":""}